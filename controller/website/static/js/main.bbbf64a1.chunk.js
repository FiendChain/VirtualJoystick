(this.webpackJsonpvjoy=this.webpackJsonpvjoy||[]).push([[0],{13:function(e,t,n){e.exports=n(32)},18:function(e,t,n){},19:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(9),r=n.n(i),c=(n(18),n(6)),s=l.a.createContext(),o=s.Provider,u=s,m=(n(19),n(10)),d=n.n(m);n(30);function x(e){var t=e.xg,n=e.yg,i=e.pwidth,r=void 0===i?150:i,c=e.pheight,s=void 0===c?150:c,o=e.snap,m=void 0===o||o,x=Object(a.useContext)(u);return l.a.createElement("div",null,l.a.createElement(d.a,{options:{mode:"static",color:"green",position:{top:"50%",left:"50%"}},style:{outline:"1px dashed green",width:r,height:s},onMove:function(e,a){var l=a.angle.radian,i=a.force,r=Math.cos(l)*i,c=Math.sin(l)*i,s=Math.min(r/3+.5,1),o=Math.min(-c/3+.5,1);x.on_axis(s,t),x.on_axis(o,n)},onEnd:function(){m&&(x.on_axis(.5,t),x.on_axis(.5,n))}}))}var h=document.documentElement;function E(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):h.requestFullscreen?h.requestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen()}var v=n(5),p=n(3),f=n(4),y=function(){function e(){Object(p.a)(this,e),this.ws=null}return Object(f.a)(e,[{key:"connect",value:function(e){var t=this;e||(e="ws://".concat(document.location.hostname,":8765")),this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=function(){t.send(new Uint8Array([255]))}}},{key:"send",value:function(e){this.ws&&(this.ws.readyState===this.ws.OPEN&&this.ws.send(e),this.ws.readyState==this.ws.CLOSED&&(console.log("Reconnecting to websocket"),this.connect()))}},{key:"on_axis",value:function(e,t){var n=new Uint8Array(new Float32Array([e]).buffer),a={x:131,y:132,z:133,rx:134,ry:135,rz:136,sl0:137,sl1:144}[t];this.send(new Uint8Array([a].concat(Object(v.a)(n))))}},{key:"on_button_press",value:function(e){this.send(new Uint8Array([129,255&e]))}},{key:"on_button_release",value:function(e){this.send(new Uint8Array([130,255&e]))}}]),e}(),b=n(7),w=n(11),g=n(12),k=(n(31),function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={enabled:!0,x:null,y:null},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("deviceorientation",(function(t){return e.handle_orientation(t)}))}},{key:"handle_orientation",value:function(e){if(this.setState(Object(b.a)({},this.state,{x:0,y:0})),this.state.enabled){var t=e.beta,n=e.gamma;if(null!=t&&null!=n){t=((t=this.clip(t,-90,90))+90)/180,n=((n=this.clip(n,-90,90))+90)/180;var a=this.context,l=new Uint8Array(new Float32Array([t,n]).buffer);a.send(new Uint8Array([175].concat(Object(v.a)(l)))),this.setState(Object(b.a)({},this.state,{x:t,y:n}))}else this.setState(Object(b.a)({},this.state,{x:t,y:n}))}}},{key:"clip",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"toggle",value:function(){this.setState({enabled:!this.state.enabled})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("button",{className:this.state.enabled?"gyro-enabled":"",onClick:function(){return e.toggle()}},"Gyro"),l.a.createElement("label",{style:{marginLeft:"2px"}},"x: ",this.state.x||"?",", y: ",this.state.y||"?"))}}]),n}(a.Component));function j(e){var t=e.axis,n=e.text,i=e.default_value,r=void 0===i?50:i,s=e.snap,o=void 0===s||s,m=e.step,d=void 0===m?10:m,x=Object(a.useContext)(u),h=Object(a.useState)(r),E=Object(c.a)(h,2),v=E[0],p=E[1],f=Object(a.useState)(o),y=Object(c.a)(f,2),b=y[0],w=y[1];function g(){x.on_axis(r/100,t),p(r)}function k(){b&&g()}return l.a.createElement("div",{className:"w-100"},l.a.createElement("input",{className:"w-75",type:"range",value:v,max:100,min:0,step:d,onChange:function(e){var n=e.target.value/100;x.on_axis(n,t),p(e.target.value)},onMouseUp:k,onTouchEnd:k}),l.a.createElement("button",{className:b?"snapped-slider":"",onClick:function(){b?w(!1):(w(!0),g())}},n))}function O(e){var t=e.id,n=e.text,i=Object(a.useState)(!1),r=Object(c.a)(i,2),s=r[0],o=r[1],m=Object(a.useContext)(u);function d(){o(!0),m.on_button_press(t)}function x(){o(!1),m.on_button_release(t)}return l.a.createElement("button",{className:s?"pressed-btn":"",onMouseDown:d,onMouseUp:x,onTouchStart:d,onTouchEnd:x,style:{margin:"5px"}},n)}k.contextType=u;var F=function(){var e=new y;return e.connect(),l.a.createElement(o,{value:e},l.a.createElement("div",{className:"container noselect"},l.a.createElement("div",{className:"left-panel"},l.a.createElement(x,{xg:"x",yg:"y",pwidth:250,pheight:250}),l.a.createElement(j,{axis:"sl0",text:"spoilers",snap:!1,step:1,default_value:0}),l.a.createElement("div",null,l.a.createElement(O,{id:22,text:"PT Up"}),l.a.createElement(O,{id:23,text:"PT Down"})),l.a.createElement(k,null)),l.a.createElement("div",{className:"mid-panel"},l.a.createElement(x,{xg:"rx",yg:"ry",pwidth:250,pheight:250,snap:!0}),l.a.createElement("div",null,l.a.createElement(O,{id:15,text:"Reset Camera"}),l.a.createElement(O,{id:16,text:"Ext Camera"}),l.a.createElement(O,{id:13,text:"Menu"}),l.a.createElement(O,{id:14,text:"Alt"}),l.a.createElement(O,{id:17,text:"Map"}),l.a.createElement(O,{id:18,text:"Drone"}),l.a.createElement("div",null,l.a.createElement("label",null,l.a.createElement("small",null,"Instruments")),l.a.createElement(O,{id:19,text:"Prev"}),l.a.createElement(O,{id:20,text:"Next"})))),l.a.createElement("div",{className:"right-panel"},l.a.createElement(j,{axis:"z",text:"rudder",step:1}),l.a.createElement(j,{axis:"rz",text:"flaps",snap:!1,step:1}),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(O,{id:12,text:"Flaps Up"}),l.a.createElement(O,{id:2,text:"Flaps Down"})),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(O,{id:3,text:"Gear"}),l.a.createElement(O,{id:4,text:"Brakes"}),l.a.createElement(O,{id:5,text:"PBrakes"})),l.a.createElement(j,{axis:"sl1",text:"eng",snap:!1,step:1}),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(O,{id:6,text:"Y"}),l.a.createElement("div",null,l.a.createElement(O,{id:7,text:"X"}),l.a.createElement(O,{id:8,text:"B"})),l.a.createElement(O,{id:9,text:"A"})),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(O,{id:10,text:"Select"}),l.a.createElement(O,{id:11,text:"Start"}),l.a.createElement(O,{id:21,text:"AI Pilot"})),l.a.createElement("div",{style:{marginTop:"10px",float:"right"}},l.a.createElement("button",{onClick:E},l.a.createElement("b",null,"\u26f6"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.bbbf64a1.chunk.js.map